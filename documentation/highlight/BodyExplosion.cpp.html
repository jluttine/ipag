<pre><tt><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;math.h&gt;</span>

<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"BodyExplosion.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"images.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"soundList.h"</span>



<span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Contsructor</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * @param type Style of the explosion.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
BodyExplosion<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">BodyExplosion</span></span><span style="color: #990000">(</span>World <span style="color: #990000">&amp;</span>world<span style="color: #990000">,</span> <span style="color: #009900">float</span> x<span style="color: #990000">,</span> <span style="color: #009900">float</span> y<span style="color: #990000">,</span> EType type<span style="color: #990000">)</span>
    <span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">BodyMovable</span></span><span style="color: #990000">(</span> world<span style="color: #990000">,</span> x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span> <span style="color: #990000">)</span>
<span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>numParticles <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>particles <span style="color: #990000">=</span> NULL<span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>timeLived <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>type <span style="color: #990000">=</span> type<span style="color: #990000">;</span>
    
    <span style="font-weight: bold"><span style="color: #0000FF">switch</span></span> <span style="color: #990000">(</span>type<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> BIG_NUCLEAR<span style="color: #990000">:</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">500</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite <span style="color: #990000">=</span> IMAGE_EXPLOSION_GB<span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #000000">createShockwave</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>world<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">playSound</span></span><span style="color: #990000">(</span>SOUND_EXPLOSION_NB<span style="color: #990000">)</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
            
        <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> SMALL_NUCLEAR<span style="color: #990000">:</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">300</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite <span style="color: #990000">=</span> IMAGE_EXPLOSION_NS<span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>world<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">playSound</span></span><span style="color: #990000">(</span>SOUND_EXPLOSION_NS<span style="color: #990000">)</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
            
        <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> BIG_GAS<span style="color: #990000">:</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">500</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite <span style="color: #990000">=</span> IMAGE_EXPLOSION_GB<span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>world<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">playSound</span></span><span style="color: #990000">(</span>SOUND_EXPLOSION_GB<span style="color: #990000">)</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
            
        <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> SMALL_GAS<span style="color: #990000">:</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">500</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite <span style="color: #990000">=</span> IMAGE_EXPLOSION_GB<span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>world<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">playSound</span></span><span style="color: #990000">(</span>SOUND_EXPLOSION_GS<span style="color: #990000">)</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
        
        <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> LASER<span style="color: #990000">:</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">200</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite <span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
        
        <span style="font-weight: bold"><span style="color: #0000FF">default</span></span><span style="color: #990000">:</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">500</span><span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite <span style="color: #990000">=</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

BodyExplosion<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="color: #990000">~</span><span style="font-weight: bold"><span style="color: #000000">BodyExplosion</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">&lt;</span>numParticles<span style="color: #990000">;</span> i<span style="color: #990000">+</span><span style="color: #990000">+</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">delete</span></span> particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>location<span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
    
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>particles <span style="color: #990000">!</span><span style="color: #990000">=</span> NULL<span style="color: #990000">)</span>
        <span style="font-weight: bold"><span style="color: #0000FF">delete</span></span> <span style="color: #990000">[</span><span style="color: #990000">]</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>particles<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="color: #009900">void</span> BodyExplosion<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">step</span></span><span style="color: #990000">(</span><span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> timestep<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>timeLived <span style="color: #990000">+</span><span style="color: #990000">=</span> timestep<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">//Move particles</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>numParticles<span style="color: #990000">;</span> i<span style="color: #990000">+</span><span style="color: #990000">+</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>timeLived <span style="color: #990000">+</span><span style="color: #990000">=</span> timestep<span style="color: #990000">;</span>
        
        <span style="font-style: italic"><span style="color: #9A1900">//Advance animation</span></span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>phase <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">float</span><span style="color: #990000">)</span>particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>timeLived <span style="color: #990000">/</span> particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>lifetime<span style="color: #990000">;</span>
        
        <span style="font-style: italic"><span style="color: #9A1900">//Move particle</span></span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>location<span style="color: #990000">-</span><span style="color: #990000">&gt;</span><span style="font-weight: bold"><span style="color: #000000">add</span></span><span style="color: #990000">(</span>particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>vx<span style="color: #990000">,</span> particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>vy<span style="color: #990000">)</span><span style="color: #990000">;</span>

        <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>timeLived <span style="color: #990000">&gt;</span><span style="color: #990000">=</span> particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>lifetime<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>active <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">false</span></span><span style="color: #990000">;</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">//Destroy explosion if time is up</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>timeLived <span style="color: #990000">&gt;</span><span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime<span style="color: #990000">)</span>
        <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span><span style="font-weight: bold"><span style="color: #000000">destroy</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    
    <span style="font-style: italic"><span style="color: #9A1900">//Make it move</span></span>
    BodyMovable<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">step</span></span><span style="color: #990000">(</span>timestep<span style="color: #990000">)</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Adds a standard shockwave.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #009900">void</span> BodyExplosion<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">createShockwave</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="color: #009900">float</span> power<span style="color: #990000">,</span> angle<span style="color: #990000">;</span>
    
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>numParticles <span style="color: #990000">=</span> <span style="color: #993399">40</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>particles <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> TParticle<span style="color: #990000">[</span>numParticles<span style="color: #990000">]</span><span style="color: #990000">;</span>
    
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> numParticles<span style="color: #990000">;</span> i<span style="color: #990000">+</span><span style="color: #990000">+</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>location <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Coordinates</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>location<span style="color: #990000">)</span><span style="color: #990000">;</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>timeLived <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>active <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">true</span></span><span style="color: #990000">;</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>sprite <span style="color: #990000">=</span> IMAGE_SMOKE<span style="color: #990000">;</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>phase <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>

        power <span style="color: #990000">=</span> <span style="color: #993399">3</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span><span style="color: #009900">float</span><span style="color: #990000">)</span><span style="font-weight: bold"><span style="color: #000000">rand</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="color: #990000">/</span> RAND_MAX <span style="color: #990000">*</span> <span style="color: #990000">.</span><span style="color: #993399">5</span> <span style="color: #990000">-</span> <span style="color: #990000">.</span><span style="color: #993399">25</span><span style="color: #990000">;</span>
        angle <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #009900">float</span><span style="color: #990000">)</span><span style="font-weight: bold"><span style="color: #000000">rand</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="color: #990000">/</span> RAND_MAX <span style="color: #990000">*</span> M_PI <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
        
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>vx <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">cos</span></span><span style="color: #990000">(</span>angle<span style="color: #990000">)</span> <span style="color: #990000">*</span> power<span style="color: #990000">;</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>vy <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">sin</span></span><span style="color: #990000">(</span>angle<span style="color: #990000">)</span> <span style="color: #990000">*</span> power<span style="color: #990000">;</span>
        particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>lifetime <span style="color: #990000">=</span> <span style="color: #993399">400</span> <span style="color: #990000">+</span> <span style="font-weight: bold"><span style="color: #000000">rand</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="color: #990000">%</span> <span style="color: #993399">100</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Draws explosion on screen.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #009900">void</span> BodyExplosion<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Graphics <span style="color: #990000">&amp;</span>graphics<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    
    graphics<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawAnimated</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sprite<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>location<span style="color: #990000">,</span>
                          <span style="color: #990000">(</span><span style="color: #009900">float</span><span style="color: #990000">)</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>timeLived <span style="color: #990000">/</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>lifetime<span style="color: #990000">)</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #000000">drawParticles</span></span><span style="color: #990000">(</span>graphics<span style="color: #990000">)</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Draws particle cloud on screen.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="color: #009900">void</span> BodyExplosion<span style="color: #990000">:</span><span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">drawParticles</span></span><span style="color: #990000">(</span>Graphics <span style="color: #990000">&amp;</span>graphics<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span><span style="color: #009900">int</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> numParticles<span style="color: #990000">;</span> i<span style="color: #990000">+</span><span style="color: #990000">+</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>active<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            graphics<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">drawAnimated</span></span><span style="color: #990000">(</span>particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>sprite<span style="color: #990000">,</span>
                                  <span style="color: #990000">*</span>particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>location<span style="color: #990000">,</span>
                                  particles<span style="color: #990000">[</span>i<span style="color: #990000">]</span><span style="color: #990000">.</span>phase<span style="color: #990000">)</span><span style="color: #990000">;</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre>
