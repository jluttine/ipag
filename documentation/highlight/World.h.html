<pre><tt><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> _WORLD_H_
<span style="font-weight: bold"><span style="color: #000080">#define</span></span> _WORLD_H_

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> World<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">&lt;vector&gt;</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"Graphics.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"CoordinateSystem.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"Vector.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"Body.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"Sounds.h"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"soundList.h"</span>
<span style="font-style: italic"><span style="color: #9A1900">//#include "BodyPlanet.h"</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">using</span></span> std<span style="color: #990000">:</span><span style="color: #990000">:</span>vector<span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Author: Jaakko Luttinen</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * World has dimensions, gravitation constant and sound engine. In world</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * there may be lots of bodies.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> World
<span style="color: #FF0000">{</span>
    
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Constructs a new world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param width  Width of the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param height Height of the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param sounds Sound engine.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #000000">World</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span> width<span style="color: #990000">,</span> <span style="color: #009900">int</span> height<span style="color: #990000">,</span> <span style="color: #009900">float</span> gravity<span style="color: #990000">,</span> Sounds <span style="color: #990000">&amp;</span>sounds<span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Destructs the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #990000">~</span><span style="font-weight: bold"><span style="color: #000000">World</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span><span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Returns the coordinate system of the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return Coordinate system of the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">inline</span></span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> CoordinateSystem<span style="color: #990000">&amp;</span> <span style="font-weight: bold"><span style="color: #000000">getCoordinateSystem</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> 
        <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>system<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**   </span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Tells the gravitational field in a given location.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param vector Vector to store the gravitational field.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param x      X coordinate.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param y      Y coordinate.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">getGravitationalField</span></span><span style="color: #990000">(</span> Vector <span style="color: #990000">&amp;</span>vector<span style="color: #990000">,</span> <span style="color: #009900">float</span> x<span style="color: #990000">,</span> <span style="color: #009900">float</span> y <span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Returns the gravitation constant.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return Gravitation constant.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">inline</span></span> <span style="color: #009900">float</span> <span style="font-weight: bold"><span style="color: #000000">getGravitationConst</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>gravity<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Adds the given body into the world. World will free the memory</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * allocation.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param newBody Body to add.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">addBody</span></span><span style="color: #990000">(</span> Body<span style="color: #990000">&amp;</span> newBody <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Removes the given body from the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param body Body to remove.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">removeBody</span></span><span style="color: #990000">(</span> Body <span style="color: #990000">&amp;</span>body <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Removes the body of given index.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param index Index of the body to remove.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">removeBody</span></span><span style="color: #990000">(</span> <span style="color: #009900">int</span> index <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Removes all bodies from the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">removeAllBodies</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Tells whether the world has the given body.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param body Body to check.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return Whether the world has the given body.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">bool</span> <span style="font-weight: bold"><span style="color: #000000">hasBody</span></span><span style="color: #990000">(</span> Body <span style="color: #990000">&amp;</span>body <span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span><span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Returns the body of given index (or NULL).</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param index Index of the body.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return Body of given index.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>   
    Body<span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">getBody</span></span><span style="color: #990000">(</span> <span style="color: #009900">int</span> index <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Returns the closest planet to the given coordinates.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param x X coordinate.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param y Y coordinate.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return The closest planet.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    Body<span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">getNearestPlanet</span></span><span style="color: #990000">(</span> <span style="color: #009900">float</span> x<span style="color: #990000">,</span> <span style="color: #009900">float</span> y <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Simulates collisions with the given body.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param targetBody Body to check the collisions with.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">simulateCollisions</span></span><span style="color: #990000">(</span> Body <span style="color: #990000">&amp;</span>targetBody <span style="color: #990000">)</span><span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Lets bodies do their end of round procedures.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param step The relative step length 0-1.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>   
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">endOfRound</span></span><span style="color: #990000">(</span> <span style="color: #009900">float</span> step <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * World takes a step of length timestep.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param timestep Length of the simulation step.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">step</span></span><span style="color: #990000">(</span> <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> timestep <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Draws the world into graphics.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param graphics Graphics object to draw the world into.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">draw</span></span><span style="color: #990000">(</span>Graphics <span style="color: #990000">&amp;</span>graphics<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Plays a sound of given index.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param index Index of the sound.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">playSound</span></span><span style="color: #990000">(</span> <span style="color: #009900">int</span> index <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Returns the sound engine.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return The sound engine.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    Sounds<span style="color: #990000">&amp;</span> <span style="font-weight: bold"><span style="color: #000000">getSounds</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span>  <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">-</span><span style="color: #990000">&gt;</span>sounds<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">private</span></span><span style="color: #990000">:</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * The bodies in the world. Will clean the memories.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    vector<span style="color: #FF0000">&lt;Body*&gt;</span> bodies<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Coordinate system of the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    CoordinateSystem system<span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Sound engine.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    Sounds <span style="color: #990000">&amp;</span>sounds<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Gravitation constant.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">float</span> gravity<span style="color: #990000">;</span>
    
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">//_WORLD_H_</span></span>
</tt></pre>
