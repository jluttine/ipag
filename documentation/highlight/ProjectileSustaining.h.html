<pre><tt>
<span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> _PROJECTILESUSTAINING_H_
<span style="font-weight: bold"><span style="color: #000080">#define</span></span> _PROJECTILESUSTAINING_H_

<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"Projectile.h"</span>

<span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Author: Jaakko Luttinen</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * ProjectileSustaining is a class for projectiles that create the effect</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * of sustained fire. In fact, the actual projectile is kept unmoved with</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * no interaction and it will launch some new projectiles with given</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * intervals and a slight dispersion.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> ProjectileSustaining  <span style="color: #990000">:</span>  <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> Projectile
<span style="color: #FF0000">{</span>

<span style="font-weight: bold"><span style="color: #0000FF">public</span></span><span style="color: #990000">:</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Constructs a new projectile.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param name            Name of the projectile.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param description     Description of the projectile.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param price           Price of the projectile.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param ammunition      The projectiles to shoot.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param count           Number of projectiles to shoot.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param delay           Time delay between two shots.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param dispersingAngle The angle of dispersion to give some unaccuracy.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #000000">ProjectileSustaining</span></span><span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> string <span style="color: #990000">&amp;</span>name<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> string <span style="color: #990000">&amp;</span>description<span style="color: #990000">,</span>
                          <span style="color: #009900">int</span> price<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> Projectile <span style="color: #990000">&amp;</span>ammunition<span style="color: #990000">,</span> <span style="color: #009900">int</span> count<span style="color: #990000">,</span>
                          <span style="color: #009900">int</span> delay<span style="color: #990000">,</span> <span style="color: #009900">float</span> dispersingAngle <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Constructs a projectile with same properties.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param copy The projectile to use as a copy.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #000000">ProjectileSustaining</span></span><span style="color: #990000">(</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> ProjectileSustaining <span style="color: #990000">&amp;</span>copy <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Returns a dynamic copy. Makes it possible to get a copy without knowing</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * which subclass the object actually represents. Every subclass must</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * overwrite this function.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @return Dynamic copy of itself.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>   
    <span style="font-weight: bold"><span style="color: #0000FF">virtual</span></span> Projectile<span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">getCopy</span></span><span style="color: #990000">(</span><span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span>
        <span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ProjectileSustaining</span></span><span style="color: #990000">(</span> <span style="color: #990000">*</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span> <span style="color: #990000">)</span><span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Forms a string to describe the damage of the projectile.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param text String to store the damage description.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">virtual</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">getDamageText</span></span><span style="color: #990000">(</span> std<span style="color: #990000">:</span><span style="color: #990000">:</span>string <span style="color: #990000">&amp;</span>text <span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span><span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Simulates the timestep for the capsule.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param timestep The step length in ms.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param capsule  The capsule, that is the projectile in the world.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">virtual</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">step</span></span><span style="color: #990000">(</span> <span style="color: #009900">int</span> timestep<span style="color: #990000">,</span> BodyProjectile <span style="color: #990000">&amp;</span>capsel <span style="color: #990000">)</span><span style="color: #990000">;</span>

    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Simulates the collision between the capsule and colliding body.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param capsule       The capsule.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * @param collidingBody The body to collide with.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">virtual</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">collide</span></span><span style="color: #990000">(</span> BodyProjectile <span style="color: #990000">&amp;</span>capsel<span style="color: #990000">,</span> Body <span style="color: #990000">&amp;</span>collidingBody <span style="color: #990000">)</span><span style="color: #990000">;</span>
    
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span><span style="color: #990000">:</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Number of shots to fire.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">int</span> shotCount<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Number of shots fired.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">int</span> shotsFired<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Delay between two shots.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">int</span> shotDelay<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Time since last shot.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">int</span> timeElapsed<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Projectile template to use to create the shot projectiles.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> Projectile <span style="color: #990000">&amp;</span>ammunition<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Velocity for shots.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    Vector shotVelocity<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Flag to indicate that this projectile has really been shot, it's not</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * just in a weapon crate or something.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">bool</span> isShot<span style="color: #990000">;</span>
    
    <span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     * Angle of dispersion to create the effect of slight unaccuracy.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">     */</span></span>
    <span style="color: #009900">float</span> dispersingAngle<span style="color: #990000">;</span>
    
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">//_PROJECTILESUSTAINING_H_</span></span>
</tt></pre>
